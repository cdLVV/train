"use strict";(self.webpackChunktrain_ts=self.webpackChunktrain_ts||[]).push([[17],{1594:function(t,n,e){e.d(n,{ZP:function(){return j}});var a=e(1413),s=e(5671),i=e(3144),r=e(4569),c=e.n(r),o=e(2808),u=e.n(o),l=e(136),d=e(7277),f=function(t){(0,l.Z)(e,t);var n=(0,d.Z)(e);function e(){var t;(0,s.Z)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))).__USER_FRIENDLY__=!0,t}return(0,i.Z)(e)}((0,e(8737).Z)(Error)),h=function(t){(0,l.Z)(e,t);var n=(0,d.Z)(e);function e(t,a,i,r){var c;return(0,s.Z)(this,e),(c=n.call(this,t)).name="ApiBusinessError",c.errcode=void 0,c.data=void 0,c.config=void 0,c.errmsg=void 0,c.errcode=a,c.data=i,c.config=r,c.errmsg=t,c}return(0,i.Z)(e)}(f),m=function(t){(0,l.Z)(e,t);var n=(0,d.Z)(e);function e(t,a){var i;return(0,s.Z)(this,e),(i=n.call(this,t)).name="ApiNetError",i.errcode=void 0,i.errmsg=void 0,i.errcode=a,i.errmsg=t,i}return(0,i.Z)(e)}(f),_=e(95),x={},p=function(){function t(n,e){(0,s.Z)(this,t),this.config=void 0,this.axiosInstance=void 0,this.canceler=void 0;var i=(0,a.Z)((0,a.Z)({},x),e);this.config=i,this.axiosInstance=n}return(0,i.Z)(t,[{key:"then",value:function(t,n){return this.send().then(t,n)}},{key:"catch",value:function(t){return this.send().then(null,t)}},{key:"cancel",value:function(){return this.canceler&&this.canceler(),this}},{key:"appendParams",value:function(t){return this.config.params=(0,a.Z)((0,a.Z)({},this.config.params),t),this}},{key:"setParams",value:function(t){return this.config.params=t,this}},{key:"setData",value:function(t){return this.config.data=t,this}},{key:"setConfig",value:function(t){return this.config=(0,a.Z)((0,a.Z)({},this.config),t),this}},{key:"setHeaders",value:function(t){return this.config.headers=(0,a.Z)((0,a.Z)({},this.config.headers),t),this}},{key:"appendData",value:function(t){return this.config.data=(0,a.Z)((0,a.Z)({},this.config.data),t),this}},{key:"send",value:function(){this.cancel();var t=c().CancelToken.source(),n=t.cancel,e=t.token;this.config.cancelToken=e,this.canceler=n,this.config.headers||(this.config.headers={});var s=(0,a.Z)({},this.config);if("formData"===s.bodyType&&s.data instanceof window.FormData===!1){var i=new window.FormData;Object.keys(s.data).forEach((function(t){i.append(t,s.data[t])})),s.data=i}else"url"===s.bodyType&&(s.data=u().stringify(s.data));return delete s.bodyType,this.axiosInstance(s)}}]),t}(),v=(0,i.Z)((function t(n,e){var i=this;(0,s.Z)(this,t),this.axiosInstance=void 0,this.requestInstanceConfig=void 0,this.get=function(t,n){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"get",url:t},i.requestInstanceConfig),n))},this.post=function(t,n){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"post",url:t},i.requestInstanceConfig),n))},this.put=function(t,n){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"put",url:t},i.requestInstanceConfig),n))},this.delete=function(t,n){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"delete",url:t},i.requestInstanceConfig),n))},this.interceptor={req:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}((function(t){i.axiosInstance.interceptors.request.use(t)})),res:function(t){function n(n){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}((function(t){i.axiosInstance.interceptors.response.use(t)})),error:function(t){i.axiosInstance.interceptors.response.use(void 0,t)}},this.axiosInstance=n,this.requestInstanceConfig=e}));var g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},t);return new v(c().create(n),t)}({baseURL:"https://www.fastmock.site"});g.interceptor.req((function(t){var n=(0,a.Z)({},t.headers);return Object.keys(n).forEach((function(t){void 0===n[t]&&delete n[t]})),(0,a.Z)((0,a.Z)({},t),{},{headers:n})})),g.interceptor.res((function(t){var n,e=t,a=e.data,s=e.config;return s.notCheckCode||200===a.code?a:((null===(n=s.showError)||void 0===n||n)&&(0,_.X)(a.desc),Promise.reject(new h(a.desc,a.code,a,s)))})),g.interceptor.error((function(t){var n;if(t instanceof h)return Promise.reject(t);var e=t,a=e.response,s=e.config,i=void 0===s?{}:s,r="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",c=-255;if(a){var o=a.status;switch(c=o,o){case 0:r="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc:".concat(c);break;case 404:r="\u60a8\u8bf7\u6c42\u7684\u5730\u5740\u4e0d\u5b58\u5728:".concat(c);break;default:r="\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5:".concat(c)}}else r="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc";return(null===(n=i.showError)||void 0===n||n)&&(0,_.X)(r),Promise.reject(new m(r,c))}));var j=g},95:function(t,n,e){e.d(n,{X:function(){return s}});var a=e(3085);function s(t,n){a.Z.error({top:80,message:n||"\u8bf7\u6c42\u9519\u8bef",description:"\u539f\u56e0\uff1a".concat(t)})}},773:function(t,n,e){var a=e(1250),s=e(9434),i=e(5273),r=e(7781),c=e(2540),o=e(5752),u=e(1413),l=e(4925),d=e(5861),f=e(7757),h=e.n(f),m=e(1594);var _=e(5442),x=["sku","availableSizes"];(0,_.MD)();var p="/train",v=(0,i.hg)("product/requestProducts",function(){var t=(0,d.Z)(h().mark((function t(n){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.ZP.get("/shop-static/json/products.json").setConfig({baseURL:"".concat("/train"),notCheckCode:!0});case 2:return e=t.sent,t.abrupt("return",new Promise((function(t){setTimeout((function(){t(e.data.products.filter((function(t){return 0===n.size||(e=n,t.availableSizes.some((function(t){return e.has(t)})));var e})).map((function(t){var n=t.sku,e=t.availableSizes,a=(0,l.Z)(t,x);return(0,u.Z)((0,u.Z)({},a),{},{img1:"".concat(p,"/shop-static/products/").concat(n,"-1-product.webp"),img2:"".concat(p,"/shop-static/products/").concat(n,"-2-product.webp"),sku:n,availableSizes:Array.from(new Set(e))})})))}),1e3)})));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}());var g=(0,i.oM)({name:"product",initialState:{sizes:new Set([]),allSize:["XS","S","M","ML","L","XL","XXL"],products:[],allProducts:[],loading:!1},reducers:{setSizes:function(t,n){console.log({action:n});var e=n.payload;t.sizes.has(e)?t.sizes.delete(e):t.sizes.add(e)}},extraReducers:function(t){t.addCase(v.pending,(function(t,n){t.loading=!0})),t.addCase(v.fulfilled,(function(t,n){t.loading=!1,t.allProducts=n.payload,t.products=n.payload})),t.addCase(v.rejected,(function(t,n){t.loading=!1}))}}),j=g.actions.setSizes,y=(0,i.oM)({name:"shopCart",initialState:{carts:[],count:0,totalPrice:0,totalInstallments:0,totalCurrencyFormat:""},reducers:{addProduct:function(t,n){var e=n.payload,a=t.carts.find((function(t){return e.id===t.id}));a?a.quantity+=1:(t.carts.push((0,u.Z)((0,u.Z)({},e),{},{quantity:1})),t.totalInstallments=t.totalInstallments>e.installments?t.totalInstallments:e.installments,t.totalCurrencyFormat=t.totalCurrencyFormat||e.currencyFormat),t.totalPrice+=e.price,t.count+=1},subtractProduct:function(t,n){var e=n.payload,a=0,s=t.carts.filter((function(n){var s=n.id===e.id;return s&&(t.count-=n.quantity,a+=n.quantity*n.price,n.quantity=0),!s}));t.carts=s,t.totalInstallments=function(t){return t.reduce((function(t,n){return n.installments>t?n.installments:t}),0)}(s),t.totalPrice-=a},subtractQuantity:function(t,n){var e=n.payload,a=t.carts.find((function(t){return e.id===t.id}));a&&a.quantity>1&&(a.quantity-=1,t.totalPrice-=a.price,t.count-=1)},deleteAll:function(t){t.carts=[],t.count=0,t.totalPrice=0,t.totalInstallments=0}}}),b=y.actions,C=b.addProduct,k=b.subtractProduct,N=b.subtractQuantity,Z=e(6994),w={key:"root",storage:o.Z,whitelist:["shopCart"]},I=(0,r.UY)({shopCart:y.reducer,product:g.reducer}),P=(0,c.OJ)(w,I),S=(0,i.xC)({reducer:P,middleware:function(t){return t({serializableCheck:!1})}}),z=(0,c.p5)(S),B=e(9439),q=e(2791),E=function(){return(0,s.I0)()},F=s.v9,T=e(184),A=function(t){var n=t.isLoading,e=t.className,a=void 0===e?"":e;return n?(0,T.jsx)("i",{className:"".concat(a," fa fa-spinner fa-spin fa-2x fa-fw")}):null},L=(0,q.memo)(A),R=e(1694),X=e.n(R),D="index_index__uTPYw",O="index_title__ePUXR",M="index_sizes__+gPb7",J="index_size__iZ5Km",U="index_checked__BGjMN",H="index_notChecked__9XFJJ";function K(t){var n=t.sizes,e=t.checked,a=t.onSizeChange,s=(0,q.useCallback)((function(t){var n=t.target.dataset.size;console.log({size:n}),n&&a(n)}),[a]);return(0,T.jsxs)("nav",{className:D,children:[(0,T.jsx)("h3",{className:O,children:"Sizes:"}),(0,T.jsx)("div",{className:M,onClick:s,children:n.map((function(t){return(0,T.jsx)("div",{"data-size":t,className:X()(J,e.has(t)?U:H),children:t},t)}))})]})}var Q=(0,q.memo)(K),W=e(6098),Y=e.n(W),$=function(t){return Y()(t).format("0,0.00")},G=(e(2504),e(2664),["src","srcSet","className","lazy","defaultSrc"]),V=e(5390);function tt(t){var n=t.src,e=t.srcSet,a=t.className,s=t.lazy,i=void 0===s||s,r=t.defaultSrc,c=void 0===r?V:r,o=(0,l.Z)(t,G);return(0,T.jsx)("img",(0,u.Z)((0,u.Z)({src:c,"data-src":n,"data-srcset":e},o),{},{className:X()(a,{lazyload:i})}))}var nt=(0,q.memo)(tt),et="index_index__PD2BB",at="index_bg2__JnRj+",st="index_bg1__7bb+N",it="index_btn__1iCJF",rt="index_bg__n5UJc",ct="index_free__K1E5V",ot="index_title__0+tMx",ut="index_price__+ykzx",lt="index_num1__4Pub2",dt="index_num2__syfHo",ft="index_installments__83AZ8",ht="index_grow__nP8BB";function mt(t){var n=t.className,e=t.data,a=t.onAddToCart,s=e.title,i=e.price,r=e.installments,c=e.currencyFormat,o=e.isFreeShipping,u=e.img1,l=e.img2,d=(0,q.useMemo)((function(){return $(i).split(".")}),[i]),f=(0,B.Z)(d,2),h=f[0],m=f[1],_=(0,q.useCallback)((function(){a&&a(e)}),[e,a]);return(0,T.jsxs)("div",{className:X()(n,et),children:[o&&(0,T.jsx)("div",{className:ct,children:"Free shipping"}),(0,T.jsx)("div",{className:X()(rt,st,"h-[270px] sm:h-[320px]"),children:(0,T.jsx)(nt,{src:u})}),(0,T.jsx)("div",{className:X()(rt,at,"h-[270px] sm:h-[320px]"),children:(0,T.jsx)(nt,{src:l})}),(0,T.jsx)("div",{className:ot,children:s}),(0,T.jsxs)("div",{className:ut,children:[c,(0,T.jsx)("span",{className:lt,children:h}),(0,T.jsxs)("span",{className:dt,children:[".",m]})]}),!!r&&(0,T.jsxs)("div",{className:ft,children:["or ",r," x",(0,T.jsxs)("span",{children:[c,$(i/r)]})]}),(0,T.jsx)("div",{className:ht}),(0,T.jsx)("button",{className:it,onClick:_,children:"Add to cart"})]})}var _t=(0,q.memo)(mt),xt="index_index__PIAue",pt="index_count__ul1tP";function vt(t){var n=t.className,e=t.list,a=t.onAddToCart;return(0,T.jsxs)("div",{className:X()(n,xt),children:[(0,T.jsxs)("div",{className:pt,children:[e.length," Product(s) found"]}),e.map((function(t){return(0,T.jsx)(_t,{data:t,onAddToCart:a},t.sku)}))]})}var gt=(0,q.memo)(vt),jt="App_app__TJ6Dh",yt="App_products__SljRF",bt="App_loading__IHRX8",Ct=e(4942),kt=e(8968),Nt="index_cartBtn__MtI7g",Zt="index_badge__Fl6mi";function wt(t){var n=t.count,e=t.onClick,a=t.className;return(0,T.jsx)("div",{className:X()(Nt,a),onClick:e,children:(0,T.jsx)(kt.Z,{showZero:!0,className:Zt,count:n,style:{backgroundColor:"rgb(234, 191, 0)"}})})}var It=(0,q.memo)(wt),Pt="index_cartBtn__8IE+K",St="index_content__707Lv",zt="index_cartButton__7lt6w",Bt="index_closeBtn__vbbby",qt="index_cartButton2Wrap__k4j8N",Et="index_cartButton2__uCpp3",Ft="index_show__yONgR",Tt="index_cartList__E6hTr",At="index_empty__7IErp",Lt="index_cartItem__fmtJb",Rt="index_img__Zu63g",Xt="index_desc__wRBLl",Dt="index_btnWrap__5bpyN",Ot="index_btn__E6pw0",Mt="index_delBtn__jchhS",Jt="index_panelBottom__e+dB9",Ut="index_textWrap__l1gqh",Ht="index_text__m28c9",Kt="index_price__N-hH9",Qt="index_first__oBTmN",Wt="index_last__eB17T",Yt="index_checkBtn__i+LLD";function $t(t){var n=t.count,e=t.onClose,a=t.onExpand,s=t.isExpand,i=t.list,r=t.totalPrice,c=t.totalCurrencyFormat,o=t.totalInstallments,u=E(),l=(0,q.useCallback)((function(t){u(k(t))}),[]),d=(0,q.useCallback)((function(t){u(N(t))}),[]),f=(0,q.useCallback)((function(t){u(C(t))}),[]);return(0,T.jsxs)("div",{className:X()(Pt,(0,Ct.Z)({},Ft,s)),children:[(0,T.jsx)(It,{className:zt,count:n,onClick:a}),(0,T.jsx)("button",{className:Bt,onClick:e,children:"X"}),(0,T.jsxs)("main",{className:St,children:[(0,T.jsxs)("div",{className:qt,children:[(0,T.jsx)(It,{className:Et,count:n,onClick:a}),(0,T.jsx)("span",{children:"Cart"})]}),(0,T.jsxs)("div",{className:Tt,children:[i.map((function(t){return(0,T.jsxs)("div",{className:Lt,children:[(0,T.jsx)("img",{className:Rt,src:t.img1,alt:t.title}),(0,T.jsxs)("div",{className:Xt,children:[(0,T.jsx)("div",{children:t.title}),(0,T.jsxs)("div",{children:["".concat(t.availableSizes[0]," | ").concat(t.style)," ",(0,T.jsx)("br",{}),"Quantity: ",t.quantity]})]}),(0,T.jsxs)("div",{className:Dt,children:[(0,T.jsx)("div",{children:"".concat(t.currencyFormat,"  ").concat($(t.price))}),(0,T.jsxs)("div",{children:[(0,T.jsx)("button",{className:Ot,disabled:t.quantity<=1,onClick:function(){return d(t)},children:"-"}),(0,T.jsx)("button",{className:Ot,onClick:function(){return f(t)},children:"+"})]})]}),(0,T.jsx)("button",{className:Mt,onClick:function(){return l(t)}})]},t.sku)})),0===i.length&&(0,T.jsxs)("div",{className:At,children:["Add some products in the cart ",(0,T.jsx)("br",{}),":)"]})]}),(0,T.jsxs)("div",{className:Jt,children:[(0,T.jsxs)("div",{className:Ut,children:[(0,T.jsx)("div",{className:Ht,children:"SUBTOTAL"}),(0,T.jsxs)("div",{className:Kt,children:[(0,T.jsx)("div",{className:Qt,children:"$  ".concat($(r))}),o&&(0,T.jsx)("div",{className:Wt,children:"OR UP TO ".concat(o," x ").concat(c," ").concat($(r/o))})]})]}),(0,T.jsx)("button",{className:Yt,disabled:!n,onClick:function(){return alert("Checkout - Subtotal: $ ".concat($(r)))},children:"Checkout"})]})]})]})}var Gt=(0,q.memo)($t);function Vt(){var t=F((function(t){return t})),n=t.shopCart,e=t.product,a=e.loading,s=e.products,i=e.sizes,r=e.allSize,c=n.carts,o=n.count,u=n.totalPrice,l=n.totalCurrencyFormat,d=n.totalInstallments,f=(0,q.useState)(!1),h=(0,B.Z)(f,2),m=h[0],_=h[1],x=E();(0,q.useEffect)((function(){x(v(i))}),[x,i]);var p=(0,q.useCallback)((function(t){x(j(t))}),[]),g=(0,q.useCallback)((function(t){x(C(t)),_(!0)}),[]),y=(0,q.useCallback)((function(){return _(!1)}),[]),b=(0,q.useCallback)((function(){return _(!0)}),[]);return(0,T.jsxs)("div",{className:jt,children:[(0,T.jsx)(L,{className:bt,isLoading:a}),(0,T.jsx)(Q,{sizes:r,checked:i,onSizeChange:p}),(0,T.jsx)(gt,{className:yt,list:s,onAddToCart:g}),(0,T.jsx)(Gt,{isExpand:m,onClose:y,onExpand:b,count:o,totalPrice:u,totalCurrencyFormat:l,totalInstallments:d,list:c})]})}a.createRoot(document.getElementById("root")).render((0,T.jsx)(s.zt,{store:S,children:(0,T.jsx)(Z.r,{loading:(0,T.jsx)(L,{className:"fixed top-0 bottom-0 left-0 right-0 m-auto flex items-center justify-center",isLoading:!0}),persistor:z,children:(0,T.jsx)(Vt,{})})}))},5390:function(t,n,e){t.exports=e.p+"static/media/loading.22555b55def970341edf.gif"}},function(t){t.O(0,[738,716,762,11],(function(){return n=773,t(t.s=n);var n}));t.O()}]);
//# sourceMappingURL=shopping-cart.8b736bc4.js.map
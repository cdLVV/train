"use strict";(self.webpackChunktrain_ts=self.webpackChunktrain_ts||[]).push([[17],{1594:function(n,t,e){e.d(t,{ZP:function(){return j}});var a=e(1413),s=e(5671),i=e(3144),r=e(4569),c=e.n(r),o=e(2808),l=e.n(o),u=e(136),d=e(7277),f=function(n){(0,u.Z)(e,n);var t=(0,d.Z)(e);function e(){var n;(0,s.Z)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))).__USER_FRIENDLY__=!0,n}return(0,i.Z)(e)}((0,e(8737).Z)(Error)),h=function(n){(0,u.Z)(e,n);var t=(0,d.Z)(e);function e(n,a,i,r){var c;return(0,s.Z)(this,e),(c=t.call(this,n)).name="ApiBusinessError",c.errcode=void 0,c.data=void 0,c.config=void 0,c.errmsg=void 0,c.errcode=a,c.data=i,c.config=r,c.errmsg=n,c}return(0,i.Z)(e)}(f),m=function(n){(0,u.Z)(e,n);var t=(0,d.Z)(e);function e(n,a){var i;return(0,s.Z)(this,e),(i=t.call(this,n)).name="ApiNetError",i.errcode=void 0,i.errmsg=void 0,i.errcode=a,i.errmsg=n,i}return(0,i.Z)(e)}(f),_=e(95),x={},p=function(){function n(t,e){(0,s.Z)(this,n),this.config=void 0,this.axiosInstance=void 0,this.canceler=void 0;var i=(0,a.Z)((0,a.Z)({},x),e);this.config=i,this.axiosInstance=t}return(0,i.Z)(n,[{key:"then",value:function(n,t){return this.send().then(n,t)}},{key:"catch",value:function(n){return this.send().then(null,n)}},{key:"cancel",value:function(){return this.canceler&&this.canceler(),this}},{key:"appendParams",value:function(n){return this.config.params=(0,a.Z)((0,a.Z)({},this.config.params),n),this}},{key:"setParams",value:function(n){return this.config.params=n,this}},{key:"setData",value:function(n){return this.config.data=n,this}},{key:"setConfig",value:function(n){return this.config=(0,a.Z)((0,a.Z)({},this.config),n),this}},{key:"setHeaders",value:function(n){return this.config.headers=(0,a.Z)((0,a.Z)({},this.config.headers),n),this}},{key:"appendData",value:function(n){return this.config.data=(0,a.Z)((0,a.Z)({},this.config.data),n),this}},{key:"send",value:function(){this.cancel();var n=c().CancelToken.source(),t=n.cancel,e=n.token;this.config.cancelToken=e,this.canceler=t,this.config.headers||(this.config.headers={});var s=(0,a.Z)({},this.config);if("formData"===s.bodyType&&s.data instanceof window.FormData===!1){var i=new window.FormData;Object.keys(s.data).forEach((function(n){i.append(n,s.data[n])})),s.data=i}else"url"===s.bodyType&&(s.data=l().stringify(s.data));return delete s.bodyType,this.axiosInstance(s)}}]),n}(),v=(0,i.Z)((function n(t,e){var i=this;(0,s.Z)(this,n),this.axiosInstance=void 0,this.requestInstanceConfig=void 0,this.get=function(n,t){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"get",url:n},i.requestInstanceConfig),t))},this.post=function(n,t){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"post",url:n},i.requestInstanceConfig),t))},this.put=function(n,t){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"put",url:n},i.requestInstanceConfig),t))},this.delete=function(n,t){return new p(i.axiosInstance,(0,a.Z)((0,a.Z)({method:"delete",url:n},i.requestInstanceConfig),t))},this.interceptor={req:function(n){function t(t){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}((function(n){i.axiosInstance.interceptors.request.use(n)})),res:function(n){function t(t){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}((function(n){i.axiosInstance.interceptors.response.use(n)})),error:function(n){i.axiosInstance.interceptors.response.use(void 0,n)}},this.axiosInstance=t,this.requestInstanceConfig=e}));var g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},n);return new v(c().create(t),n)}({baseURL:"https://www.fastmock.site"});g.interceptor.req((function(n){var t=(0,a.Z)({},n.headers);return Object.keys(t).forEach((function(n){void 0===t[n]&&delete t[n]})),(0,a.Z)((0,a.Z)({},n),{},{headers:t})})),g.interceptor.res((function(n){var t,e=n,a=e.data,s=e.config;return s.notCheckCode||200===a.code?a:((null===(t=s.showError)||void 0===t||t)&&(0,_.X)(a.desc),Promise.reject(new h(a.desc,a.code,a,s)))})),g.interceptor.error((function(n){var t;if(n instanceof h)return Promise.reject(n);var e=n,a=e.response,s=e.config,i=void 0===s?{}:s,r="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",c=-255;if(a){var o=a.status;switch(c=o,o){case 0:r="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc:".concat(c);break;case 404:r="\u60a8\u8bf7\u6c42\u7684\u5730\u5740\u4e0d\u5b58\u5728:".concat(c);break;default:r="\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5:".concat(c)}}else r="\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc";return(null===(t=i.showError)||void 0===t||t)&&(0,_.X)(r),Promise.reject(new m(r,c))}));var j=g},95:function(n,t,e){e.d(t,{X:function(){return s}});var a=e(3085);function s(n,t){a.Z.error({top:80,message:t||"\u8bf7\u6c42\u9519\u8bef",description:"\u539f\u56e0\uff1a".concat(n)})}},773:function(n,t,e){var a=e(1250),s=e(9434),i=e(5273),r=e(7781),c=e(2540),o=e(5752),l=e(1413),u=e(4925),d=e(5861),f=e(7757),h=e.n(f),m=e(1594);var _=e(5442),x=["sku","availableSizes"];(0,_.MD)();var p="/train",v=(0,i.hg)("product/requestProducts",function(){var n=(0,d.Z)(h().mark((function n(t){var e;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.ZP.get("/shop-static/json/products.json").setConfig({baseURL:"".concat("/train"),notCheckCode:!0});case 2:return e=n.sent,n.abrupt("return",new Promise((function(n){setTimeout((function(){n(e.data.products.filter((function(n){return 0===t.size||(e=t,n.availableSizes.some((function(n){return e.has(n)})));var e})).map((function(n){var t=n.sku,e=n.availableSizes,a=(0,u.Z)(n,x);return(0,l.Z)((0,l.Z)({},a),{},{img1:"".concat(p,"/shop-static/products/").concat(t,"-1-product.webp"),img2:"".concat(p,"/shop-static/products/").concat(t,"-2-product.webp"),sku:t,availableSizes:Array.from(new Set(e))})})))}),1e3)})));case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());var g=(0,i.oM)({name:"product",initialState:{sizes:new Set([]),allSize:["XS","S","M","ML","L","XL","XXL"],products:[],allProducts:[],loading:!1},reducers:{setSizes:function(n,t){console.log({action:t});var e=t.payload;n.sizes.has(e)?n.sizes.delete(e):n.sizes.add(e)}},extraReducers:function(n){n.addCase(v.pending,(function(n,t){n.loading=!0})),n.addCase(v.fulfilled,(function(n,t){n.loading=!1,n.allProducts=t.payload,n.products=t.payload})),n.addCase(v.rejected,(function(n,t){n.loading=!1}))}}),j=g.actions.setSizes,b=(0,i.oM)({name:"shopCart",initialState:{carts:[],count:0,totalPrice:0,totalInstallments:0,totalCurrencyFormat:""},reducers:{addProduct:function(n,t){var e=t.payload,a=n.carts.find((function(n){return e.id===n.id}));a?a.quantity+=1:(n.carts.push((0,l.Z)((0,l.Z)({},e),{},{quantity:1})),n.totalInstallments=n.totalInstallments>e.installments?n.totalInstallments:e.installments,n.totalCurrencyFormat=n.totalCurrencyFormat||e.currencyFormat),n.totalPrice+=e.price,n.count+=1},subtractProduct:function(n,t){var e=t.payload,a=0,s=n.carts.filter((function(t){var s=t.id===e.id;return s&&(n.count-=t.quantity,a+=t.quantity*t.price,t.quantity=0),!s}));n.carts=s,n.totalInstallments=function(n){return n.reduce((function(n,t){return t.installments>n?t.installments:n}),0)}(s),n.totalPrice-=a},subtractQuantity:function(n,t){var e=t.payload,a=n.carts.find((function(n){return e.id===n.id}));a&&a.quantity>1&&(a.quantity-=1,n.totalPrice-=a.price,n.count-=1)},deleteAll:function(n){n.carts=[],n.count=0,n.totalPrice=0,n.totalInstallments=0}}}),C=b.actions,y=C.addProduct,k=C.subtractProduct,N=C.subtractQuantity,Z=C.deleteAll,w=e(6994),I={key:"root",storage:o.Z,whitelist:["shopCart"]},S=(0,r.UY)({shopCart:b.reducer,product:g.reducer}),z=(0,c.OJ)(I,S),P=(0,i.xC)({reducer:z,middleware:function(n){return n({serializableCheck:!1})}}),B=(0,c.p5)(P),q=e(9439),E=e(2791),T=function(){return(0,s.I0)()},A=s.v9,F=e(184),L=function(n){var t=n.isLoading,e=n.className,a=void 0===e?"":e;return t?(0,F.jsx)("i",{className:"".concat(a," fa fa-spinner fa-spin fa-2x fa-fw")}):null},R=(0,E.memo)(L),O=e(1694),X=e.n(O),D="index_index__uTPYw",M="index_title__ePUXR",J="index_sizes__+gPb7",U="index_size__iZ5Km",H="index_checked__BGjMN",K="index_notChecked__9XFJJ";function Q(n){var t=n.sizes,e=n.checked,a=n.onSizeChange,s=(0,E.useCallback)((function(n){var t=n.target.dataset.size;console.log({size:t}),t&&a(t)}),[a]);return(0,F.jsxs)("nav",{className:D,children:[(0,F.jsx)("h3",{className:M,children:"Sizes:"}),(0,F.jsx)("div",{className:J,onClick:s,children:t.map((function(n){return(0,F.jsx)("div",{"data-size":n,className:X()(U,e.has(n)?H:K),children:n},n)}))})]})}var W=(0,E.memo)(Q),Y=e(6098),$=e.n(Y),G=function(n){return $()(n).format("0,0.00")},V=(e(2504),e(2664),["src","srcSet","className","lazy","defaultSrc"]),nn=e(5390);function tn(n){var t=n.src,e=n.srcSet,a=n.className,s=n.lazy,i=void 0===s||s,r=n.defaultSrc,c=void 0===r?nn:r,o=(0,u.Z)(n,V);return(0,F.jsx)("img",(0,l.Z)((0,l.Z)({src:c,"data-src":t,"data-srcset":e},o),{},{className:X()(a,{lazyload:i})}))}var en=(0,E.memo)(tn),an="index_index__PD2BB",sn="index_bg2__JnRj+",rn="index_bg1__7bb+N",cn="index_btn__1iCJF",on="index_bg__n5UJc",ln="index_free__K1E5V",un="index_title__0+tMx",dn="index_price__+ykzx",fn="index_num1__4Pub2",hn="index_num2__syfHo",mn="index_installments__83AZ8",_n="index_grow__nP8BB",xn="index_availableSizes__Zio69";function pn(n){var t=n.className,e=n.data,a=n.onAddToCart,s=e.title,i=e.price,r=e.installments,c=e.currencyFormat,o=e.isFreeShipping,l=e.img1,u=e.img2,d=e.availableSizes,f=(0,E.useMemo)((function(){return G(i).split(".")}),[i]),h=(0,q.Z)(f,2),m=h[0],_=h[1],x=(0,E.useCallback)((function(){a&&a(e)}),[e,a]);return(0,F.jsxs)("div",{className:X()(t,an),children:[o&&(0,F.jsx)("div",{className:ln,children:"Free shipping"}),(0,F.jsx)("div",{className:X()(on,rn,"h-[270px] sm:h-[320px]"),children:(0,F.jsx)(en,{src:l})}),(0,F.jsx)("div",{className:X()(on,sn,"h-[270px] sm:h-[320px]"),children:(0,F.jsx)(en,{src:u})}),(0,F.jsx)("div",{className:un,children:s}),(0,F.jsxs)("div",{className:dn,children:[c,(0,F.jsx)("span",{className:fn,children:m}),(0,F.jsxs)("span",{className:hn,children:[".",_]})]}),(0,F.jsx)("div",{className:xn,children:d.map((function(n){return(0,F.jsx)("span",{children:n},n)}))}),!!r&&(0,F.jsxs)("div",{className:mn,children:["or ",r," x",(0,F.jsxs)("span",{children:[c,G(i/r)]})]}),(0,F.jsx)("div",{className:_n}),(0,F.jsx)("button",{className:cn,onClick:x,children:"Add to cart"})]})}var vn=(0,E.memo)(pn),gn="index_index__PIAue",jn="index_count__ul1tP";function bn(n){var t=n.className,e=n.list,a=n.onAddToCart;return(0,F.jsxs)("div",{className:X()(t,gn),children:[(0,F.jsxs)("div",{className:jn,children:[e.length," Product(s) found"]}),e.map((function(n){return(0,F.jsx)(vn,{data:n,onAddToCart:a},n.sku)}))]})}var Cn=(0,E.memo)(bn),yn="App_app__TJ6Dh",kn="App_products__SljRF",Nn="App_loading__IHRX8",Zn=e(4942),wn=e(2897),In=e(8968),Sn="index_cartBtn__MtI7g",zn="index_badge__Fl6mi";function Pn(n){var t=n.count,e=n.onClick,a=n.className;return(0,F.jsx)("div",{className:X()(Sn,a),onClick:e,children:(0,F.jsx)(In.Z,{showZero:!0,className:zn,count:t,style:{backgroundColor:"rgb(234, 191, 0)"}})})}var Bn=(0,E.memo)(Pn),qn="index_cartBtn__8IE+K",En="index_content__707Lv",Tn="index_cartButton__7lt6w",An="index_closeBtn__vbbby",Fn="index_cartButton2Wrap__k4j8N",Ln="index_cartButton2__uCpp3",Rn="index_show__yONgR",On="index_cartList__E6hTr",Xn="index_empty__7IErp",Dn="index_cartItem__fmtJb",Mn="index_img__Zu63g",Jn="index_desc__wRBLl",Un="index_btnWrap__5bpyN",Hn="index_btn__E6pw0",Kn="index_delBtn__jchhS",Qn="index_panelBottom__e+dB9",Wn="index_textWrap__l1gqh",Yn="index_text__m28c9",$n="index_price__N-hH9",Gn="index_first__oBTmN",Vn="index_last__eB17T",nt="index_checkBtn__i+LLD";function tt(n){var t=n.count,e=n.onClose,a=n.onExpand,s=n.isExpand,i=n.list,r=n.totalPrice,c=n.totalCurrencyFormat,o=n.totalInstallments,l=T(),u=(0,E.useCallback)((function(){wn.Z.confirm({title:"\u786e\u8ba4\u8d2d\u4e70\u5f53\u524d\u8d2d\u7269\u8f66\u7684\u5546\u54c1?",content:"Checkout - Subtotal: $ ".concat(G(r)),okText:"\u786e\u8ba4",onOk:function(){l(Z({}))},cancelText:"\u518d\u60f3\u60f3",onCancel:function(){console.log("Cancel")}})}),[r]),d=(0,E.useCallback)((function(n){l(k(n))}),[]),f=(0,E.useCallback)((function(n){l(N(n))}),[]),h=(0,E.useCallback)((function(n){l(y(n))}),[]);return(0,F.jsxs)("div",{className:X()(qn,(0,Zn.Z)({},Rn,s)),children:[(0,F.jsx)(Bn,{className:Tn,count:t,onClick:a}),(0,F.jsx)("button",{className:An,onClick:e,children:"X"}),(0,F.jsxs)("main",{className:En,children:[(0,F.jsxs)("div",{className:Fn,children:[(0,F.jsx)(Bn,{className:Ln,count:t,onClick:a}),(0,F.jsx)("span",{children:"Cart"})]}),(0,F.jsxs)("div",{className:On,children:[i.map((function(n){return(0,F.jsxs)("div",{className:Dn,children:[(0,F.jsx)("img",{className:Mn,src:n.img1,alt:n.title}),(0,F.jsxs)("div",{className:Jn,children:[(0,F.jsx)("div",{children:n.title}),(0,F.jsxs)("div",{children:["".concat(n.availableSizes[0]," | ").concat(n.style)," ",(0,F.jsx)("br",{}),"Quantity: ",n.quantity]})]}),(0,F.jsxs)("div",{className:Un,children:[(0,F.jsx)("div",{children:"".concat(n.currencyFormat,"  ").concat(G(n.price))}),(0,F.jsxs)("div",{children:[(0,F.jsx)("button",{className:Hn,disabled:n.quantity<=1,onClick:function(){return f(n)},children:"-"}),(0,F.jsx)("button",{className:Hn,onClick:function(){return h(n)},children:"+"})]})]}),(0,F.jsx)("button",{className:Kn,onClick:function(){return d(n)}})]},n.sku)})),0===i.length&&(0,F.jsxs)("div",{className:Xn,children:["Add some products in the cart ",(0,F.jsx)("br",{}),":)"]})]})]}),(0,F.jsxs)("div",{className:Qn,children:[(0,F.jsxs)("div",{className:Wn,children:[(0,F.jsx)("div",{className:Yn,children:"SUBTOTAL"}),(0,F.jsxs)("div",{className:$n,children:[(0,F.jsx)("div",{className:Gn,children:"$  ".concat(G(r))}),o&&(0,F.jsx)("div",{className:Vn,children:"OR UP TO ".concat(o," x ").concat(c," ").concat(G(r/o))})]})]}),(0,F.jsx)("button",{className:nt,disabled:!t,onClick:u,children:"Checkout"})]})]})}var et=(0,E.memo)(tt);function at(){var n=A((function(n){return n})),t=n.shopCart,e=n.product,a=e.loading,s=e.products,i=e.sizes,r=e.allSize,c=t.carts,o=t.count,l=t.totalPrice,u=t.totalCurrencyFormat,d=t.totalInstallments,f=(0,E.useState)(!1),h=(0,q.Z)(f,2),m=h[0],_=h[1],x=T();(0,E.useEffect)((function(){x(v(i))}),[x,i]);var p=(0,E.useCallback)((function(n){x(j(n))}),[]),g=(0,E.useCallback)((function(n){x(y(n)),_(!0)}),[]),b=(0,E.useCallback)((function(){return _(!1)}),[]),C=(0,E.useCallback)((function(){return _(!0)}),[]);return(0,F.jsxs)("div",{className:yn,children:[(0,F.jsx)(R,{className:Nn,isLoading:a}),(0,F.jsx)(W,{sizes:r,checked:i,onSizeChange:p}),(0,F.jsx)(Cn,{className:kn,list:s,onAddToCart:g}),(0,F.jsx)(et,{isExpand:m,onClose:b,onExpand:C,count:o,totalPrice:l,totalCurrencyFormat:u,totalInstallments:d,list:c})]})}a.createRoot(document.getElementById("root")).render((0,F.jsx)(s.zt,{store:P,children:(0,F.jsx)(w.r,{loading:(0,F.jsx)(R,{className:"fixed top-0 bottom-0 left-0 right-0 m-auto flex items-center justify-center",isLoading:!0}),persistor:B,children:(0,F.jsx)(at,{})})}))},5390:function(n,t,e){n.exports=e.p+"static/media/loading.22555b55def970341edf.gif"}},function(n){n.O(0,[738,716,762,897,11],(function(){return t=773,n(n.s=t);var t}));n.O()}]);
//# sourceMappingURL=shopping-cart.66ddbc21.js.map
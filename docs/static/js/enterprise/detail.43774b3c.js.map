{"version":3,"file":"static/js/enterprise/detail.43774b3c.js","mappings":"yPASA,SAASA,IACP,IACMC,EADS,IAAIC,gBAAgBC,OAAOC,SAASC,QAC/BC,IAAI,SAAW,GACnC,GAAwBC,EAAAA,EAAAA,YAAxB,eAAOC,EAAP,KAAaC,EAAb,KACMC,GAAYC,EAAAA,EAAAA,SAAO,GACnBC,GAAW,OAAJJ,QAAI,IAAJA,OAAA,EAAAA,EAAMI,OAAQ,GAErBC,GAAOC,EAAAA,EAAAA,UAAQ,WACnB,IAAMC,EAAS,IAAIC,OAAO,sCAE1B,OAAON,EAAUO,QACbL,EAAKM,QAAQH,GAAQ,SAAUI,EAAOC,GAMpC,OAJKD,EAAME,SAAS,YAClBF,EAAQA,EAAMD,QAAQ,QAAS,qBAG1BC,EACJD,QAAQ,OAAQ,aAChBA,QAAQ,UAAW,oBACnBA,QAAQ,UAAW,uBAExBN,IACH,CAACA,IAiBJ,OAfAU,EAAAA,EAAAA,YAAU,YACRC,EAAAA,EAAAA,GAAoBtB,GACjBuB,MAAK,SAACC,GACLf,EAAUO,SAAU,EACpBR,EAAQgB,EAAIjB,SAEbkB,OAAM,SAACC,GACNlB,EAAQ,CACNR,KAAAA,EACA2B,MAAO,mDACPhB,KAAK,aAAD,OAAeiB,EAAf,iCAGT,CAAC5B,KAGF,iBAAK6B,UAAU,4BAAf,WACE,SAACC,EAAA,EAAD,KACA,gBAAKD,UAAU,8BAAf,UACE,gCAAMtB,QAAN,IAAMA,OAAN,EAAMA,EAAMoB,WAEd,gBACEE,UAAU,iEACVE,wBAAyB,CAAEC,OAAQpB,MAErC,SAACqB,EAAA,EAAD,CAAQJ,UAAU,iBAKxB,OAAeK,EAAAA,EAAAA,MAAKnC,GC1DpBoC,QAAQC,IAAI,wBAECC,EAAAA,WACXC,SAASC,eAAe,SAErBC,QAEH,SAAC,EAAD,O","sources":["entries/enterprise/detail/App.tsx","entries/enterprise/detail/index.tsx"],"sourcesContent":["import { memo, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport \"./App.less\";\r\nimport Header from \"../components/Header\";\r\nimport Footer from \"../components/Footer\";\r\nimport { getNewsDetailByCode, GetNewsDetailByCodeRes } from \"@/api/enterprise\";\r\nimport errorImg from \"../images/error.jpeg\";\r\nimport \"lazysizes\";\r\nimport \"lazysizes/plugins/parent-fit/ls.parent-fit\";\r\n\r\nfunction App() {\r\n  const params = new URLSearchParams(window.location.search);\r\n  const code = params.get(\"code\") || \"\";\r\n  const [data, setData] = useState<GetNewsDetailByCodeRes[\"data\"]>();\r\n  const isLazyImg = useRef(false);\r\n  const text = data?.text || \"\";\r\n\r\n  const html = useMemo(() => {\r\n    const regex3 = new RegExp(/<img [^>]*src=['\"]([^'\"]+)[^>]*>/gi);\r\n\r\n    return isLazyImg.current\r\n      ? text.replace(regex3, function (match, capture) {\r\n          // console.log({ match, capture });\r\n          if (!match.includes(\"class=\")) {\r\n            match = match.replace(\"<img \", '<img class=\"img\"');\r\n          }\r\n\r\n          return match\r\n            .replace(\"src=\", \"data-src=\")\r\n            .replace('class=\"', 'class=\"lazyload ')\r\n            .replace(\"class='\", \"class='lazyload \");\r\n        })\r\n      : text;\r\n  }, [text]);\r\n\r\n  useEffect(() => {\r\n    getNewsDetailByCode(code)\r\n      .then((res) => {\r\n        isLazyImg.current = true;\r\n        setData(res.data);\r\n      })\r\n      .catch((e) => {\r\n        setData({\r\n          code,\r\n          title: \"暂未找到当前新闻\",\r\n          text: `<img src=\"${errorImg}\" class=\"error-img\" />`,\r\n        });\r\n      });\r\n  }, [code]);\r\n\r\n  return (\r\n    <div className=\"news-detail flex flex-col\">\r\n      <Header />\r\n      <div className=\"news-detail-title flex-none\">\r\n        <div>{data?.title}</div>\r\n      </div>\r\n      <div\r\n        className=\"news-detail-content px-5 py-4 flex-shrink-0 flex-grow relative\"\r\n        dangerouslySetInnerHTML={{ __html: html }}\r\n      />\r\n      <Footer className=\"flex-none\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(App);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\n// import reportWebVitals from '@/reportWebVitals';\r\nimport \"./index.less\";\r\nimport App from \"./App\";\r\n\r\nconsole.log(\"--------------------\");\r\n\r\nconst root = ReactDOM.createRoot(\r\n  document.getElementById(\"root\") as HTMLElement\r\n);\r\nroot.render(\r\n  // <React.StrictMode>\r\n  <App />\r\n  // </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n"],"names":["App","code","URLSearchParams","window","location","search","get","useState","data","setData","isLazyImg","useRef","text","html","useMemo","regex3","RegExp","current","replace","match","capture","includes","useEffect","getNewsDetailByCode","then","res","catch","e","title","errorImg","className","Header","dangerouslySetInnerHTML","__html","Footer","memo","console","log","ReactDOM","document","getElementById","render"],"sourceRoot":""}
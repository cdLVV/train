{"version":3,"file":"static/js/danmaku-wall.8975064e.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","entries/danmaku-wall/components/Danmuku/index.tsx","entries/danmaku-wall/components/Danmuku/utils.ts","entries/danmaku-wall/components/Danmuku/portal.tsx","entries/danmaku-wall/App.tsx","entries/danmaku-wall/index.tsx","reportWebVitals.ts","../node_modules/react-dom/client.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"],"sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, {\r\n  forwardRef,\r\n  memo,\r\n  useCallback,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\n// import cn from \"classnames\";\r\nimport \"./index.less\";\r\nimport portal from \"./portal\";\r\nimport { random, randomColor } from \"./utils\";\r\n// import { root } from \"../..\";\r\nimport ReactDOM from \"react-dom/client\";\r\n// import ReactDOM2 from \"react-dom\";\r\n\r\ninterface Props {\r\n  words: string;\r\n  container?: HTMLDivElement | null;\r\n  duration?: number;\r\n  onEnd?: (val?: any) => any;\r\n}\r\n\r\nfunction Component(props: Props) {\r\n  const { words, container, duration, onEnd } = props;\r\n  const [style, setStyle] = useState<React.CSSProperties>();\r\n  const eleRef = useRef<HTMLSpanElement>(null);\r\n  const durationRef = useRef((duration || random(5, 10)) * 1000);\r\n  const [status, setStatus] = useState<\"move\" | \"pause\">(\"move\");\r\n  const lastTimeRef = useRef(0);\r\n  const useTimeRef = useRef(0);\r\n  const totalRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    const ele = eleRef.current;\r\n    const containerEle =\r\n      container || (document.getElementById(\"screen\") as HTMLDivElement);\r\n    if (ele && containerEle) {\r\n      const fontSize = random(14, 28);\r\n      const color = randomColor();\r\n      const right = -ele.clientWidth;\r\n      const top = random(0, containerEle.clientHeight - ele.clientHeight);\r\n      setStyle({\r\n        fontSize,\r\n        color,\r\n        right,\r\n        top,\r\n      });\r\n      totalRef.current = containerEle.clientWidth - right;\r\n    }\r\n  }, [container]);\r\n\r\n  useEffect(() => {\r\n    const ele = eleRef.current;\r\n    if (status === \"pause\") {\r\n      return;\r\n    }\r\n    if (ele && container) {\r\n      const total = totalRef.current;\r\n      let time = durationRef.current;\r\n      let currentX = 0;\r\n      let id = 0;\r\n      const step: FrameRequestCallback = (timestamp) => {\r\n        // const timestamp = +new Date()\r\n        lastTimeRef.current = lastTimeRef.current || timestamp;\r\n\r\n        let lastTime = lastTimeRef.current;\r\n        let useTime = useTimeRef.current;\r\n\r\n        useTime = useTime + timestamp - lastTime;\r\n\r\n        currentX = (total * useTime) / time;\r\n        // console.log({ time, useTime, timestamp, lastTime, total, currentX });\r\n\r\n        // 确保元素刚好停在total的位置\r\n        currentX = Math.min(currentX, total);\r\n        ele.style.transform = \"translateX(-\" + currentX + \"px)\";\r\n        lastTimeRef.current = timestamp;\r\n        useTimeRef.current = useTime;\r\n\r\n        if (useTime < time) {\r\n          // 在五秒后停止动画\r\n          id = requestAnimationFrame(step);\r\n        } else {\r\n          setTimeout(() => {\r\n            onEnd && onEnd();\r\n          }, 0);\r\n        }\r\n      };\r\n\r\n      id = requestAnimationFrame(step);\r\n\r\n      return () => {\r\n        id && cancelAnimationFrame(id);\r\n      };\r\n    }\r\n  }, [container, onEnd, status]);\r\n\r\n  const handleFocus = useCallback(() => {\r\n    setStatus(\"pause\");\r\n  }, []);\r\n  const handleUnFocus = useCallback(() => {\r\n    setStatus(\"move\");\r\n    lastTimeRef.current = 0;\r\n  }, []);\r\n\r\n  return (\r\n    <span\r\n      ref={eleRef}\r\n      className=\"danmaku\"\r\n      style={style}\r\n      onMouseEnter={handleFocus}\r\n      onMouseOut={handleUnFocus}\r\n    >\r\n      {words}\r\n    </span>\r\n  );\r\n}\r\n\r\ntype AllFun = {\r\n  launch: (props: Props) => any;\r\n  // OrignDanmuku: React.FC<Props>;\r\n};\r\n\r\ntype DanmukuType = React.MemoExoticComponent<\r\n  (props: any) => React.ReactPortal\r\n> &\r\n  AllFun;\r\n\r\nlet root: any;\r\nconst Danmuku = portal(Component) as DanmukuType;\r\nexport const OrignDanmuku = memo(Component);\r\nDanmuku.launch = (props: Props) => {\r\n  const TempDanmuku = forwardRef<any>((_, ref) => {\r\n    // useEffect(() => {\r\n    //   timer = window.setTimeout(() => {\r\n    //     setVisible(false)\r\n    //   }, props.duration)\r\n    //   return () => {\r\n    //     window.clearTimeout(timer)\r\n    //   }\r\n    // }, [])\r\n\r\n    // useImperativeHandle(ref, () => ({\r\n    //   close: () => setVisible(false),\r\n    // }))\r\n\r\n    return <Danmuku {...props} />;\r\n  });\r\n\r\n  root = root || ReactDOM.createRoot(document.getElementById('screen') as HTMLElement);\r\n  root.render(<TempDanmuku />);\r\n  // ReactDOM2.render(\r\n  //   <TempDanmuku />,\r\n  //   document.getElementById(\"screen\") as HTMLElement\r\n  // );\r\n\r\n  // return {\r\n  //   close: () => {\r\n  //     root.unmount();\r\n  //   },\r\n  // };\r\n};\r\nexport default Danmuku;\r\n","export function random(min = 0, max = 100) {\n  return Math.round(Math.random() * (max - min)) + min;\n}\n\nexport function randomColor() {\n  return \"#\" + Math.floor(Math.random() * 16777215).toString(16);\n}\n","import React, { memo, useMemo } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nexport default function portal(WrapComponent: React.FC<any>) {\n  const Modal = function (props: any) {\n    const container = useMemo(() => {\n      let modalRoot = document.getElementById(\"screen\");\n      if (!modalRoot) {\n        modalRoot = document.createElement(\"div\");\n        modalRoot.id = \"screen\";\n        modalRoot.classList.add(\"screen\");\n        document.body.appendChild(modalRoot);\n      }\n      return modalRoot;\n    }, []);\n    //visible控制显示/隐藏\n    return ReactDOM.createPortal(<WrapComponent {...props} container={container} />, container);\n  };\n  return memo(Modal);\n}\n","import { useCallback, useRef, useState } from \"react\";\r\nimport \"./App.less\";\r\nimport { OrignDanmuku } from \"./components/Danmuku\";\r\n\r\nfunction App() {\r\n  const words = useRef(\"\");\r\n  const count = useRef(0);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const [danmakus, setDanmakus] = useState<any[]>([]);\r\n\r\n  const handleSend = useCallback(() => {\r\n    if (words.current) {\r\n      /**\r\n       * ! Alerts v18版本，通过render，每次只会显示一个dom\r\n       */\r\n      // Danmuku.launch({\r\n      //   words: words.current,\r\n      //   duration: 10,\r\n      //   container: containerRef.current as HTMLDivElement,\r\n      // });\r\n      setDanmakus((pre) => [\r\n        ...pre,\r\n        {\r\n          id: count.current++,\r\n          words: words.current,\r\n        },\r\n      ]);\r\n    }\r\n  }, []);\r\n  const handClear = useCallback(() => {\r\n    setDanmakus([]);\r\n  }, []);\r\n\r\n  const handleChange = useCallback((e: any) => {\r\n    words.current = e.target.value;\r\n  }, []);\r\n  const handleEnd = useCallback((item: any) => {\r\n    setDanmakus((pre) => pre.filter((i) => item.id !== i.id));\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"danmaku-wall\">\r\n      <div ref={containerRef} id=\"screen\" className=\"screen\">\r\n        {danmakus.map((item) => (\r\n          <OrignDanmuku\r\n            key={item.id}\r\n            words={item.words}\r\n            container={containerRef.current}\r\n            onEnd={() => handleEnd(item)}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"text-center control-panel\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"请输入弹幕内容\"\r\n          maxLength={50}\r\n          onChange={handleChange}\r\n        />\r\n        <div>\r\n          <button className=\"primary\" type=\"button\" onClick={handleSend}>\r\n            发射\r\n          </button>\r\n          <button className=\"clean\" type=\"button\" onClick={handClear}>\r\n            清屏\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport reportWebVitals from '@/reportWebVitals';\r\nimport '@/common.css';\r\nimport App from './App';\r\n\r\nconst root = ReactDOM.createRoot(\r\n  document.getElementById('root') as HTMLElement\r\n);\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","root","random","min","max","Math","round","Component","props","words","container","duration","onEnd","useState","style","setStyle","eleRef","useRef","durationRef","status","setStatus","lastTimeRef","useTimeRef","totalRef","useEffect","ele","current","containerEle","document","getElementById","fontSize","color","floor","toString","right","clientWidth","top","clientHeight","total","time","currentX","id","requestAnimationFrame","step","timestamp","lastTime","useTime","transform","setTimeout","cancelAnimationFrame","handleFocus","useCallback","handleUnFocus","ref","className","onMouseEnter","onMouseOut","Danmuku","WrapComponent","Modal","useMemo","modalRoot","createElement","classList","add","body","appendChild","ReactDOM","memo","portal","OrignDanmuku","launch","TempDanmuku","forwardRef","_","render","count","containerRef","danmakus","setDanmakus","handleSend","pre","handClear","handleChange","e","target","value","handleEnd","item","filter","i","map","type","placeholder","maxLength","onChange","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","m","require","exports","createRoot","hydrateRoot","f","k","for","l","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","__self","__source","q","c","a","g","b","d","h","call","defaultProps","$$typeof","_owner","jsx","jsxs","module","_arrayLikeToArray","len","length","arr2","_defineProperty","obj","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_slicedToArray","_i","_s","_e","_arr","_n","_d","next","done","err","_unsupportedIterableToArray","o","minLen","slice","constructor","name","test"],"sourceRoot":""}